import { Orchestrator } from './client'
import { PROD_ORCHESTRATOR_URL, RHINESTONE_SPOKE_POOL_ADDRESS } from './consts'
import {
  AuthenticationRequiredError,
  InsufficientBalanceError,
  IntentNotFoundError,
  InvalidApiKeyError,
  InvalidIntentSignatureError,
  isOrchestratorError,
  NoPathFoundError,
  OnlyOneTargetTokenAmountCanBeUnsetError,
  OrchestratorError,
  TokenNotSupportedError,
  UnsupportedChainError,
  UnsupportedChainIdError,
  UnsupportedTokenError,
} from './error'
import {
  getHookAddress,
  getRhinestoneSpokePoolAddress,
  getSameChainModuleAddress,
  getSupportedTokens,
  getTargetModuleAddress,
  getTokenAddress,
  getTokenBalanceSlot,
  getTokenRootBalanceSlot,
  getTokenSymbol,
  getWethAddress,
  isTokenAddressSupported,
} from './registry'
import type {
  IntentCost,
  IntentInput,
  IntentOp,
  IntentOpStatus,
  IntentResult,
  IntentRoute,
  ParsedIntentOp,
  SettlementSystem,
  SignedIntentOp,
  SupportedChain,
  TokenConfig,
  UserTokenBalance,
} from './types'
import {
  INTENT_STATUS_COMPLETED,
  INTENT_STATUS_EXPIRED,
  INTENT_STATUS_FAILED,
  INTENT_STATUS_FILLED,
  INTENT_STATUS_PARTIALLY_COMPLETED,
  INTENT_STATUS_PENDING,
  INTENT_STATUS_PRECONFIRMED,
  INTENT_STATUS_UNKNOWN,
} from './types'
import { toSignatureHash } from './utils'

function getOrchestrator(
  apiKey: string,
  orchestratorUrl?: string,
): Orchestrator {
  return new Orchestrator(orchestratorUrl ?? PROD_ORCHESTRATOR_URL, apiKey)
}

export type {
  IntentCost,
  IntentInput,
  IntentOp,
  IntentOpStatus,
  IntentResult,
  IntentRoute,
  ParsedIntentOp,
  SettlementSystem,
  SignedIntentOp,
  SupportedChain,
  TokenConfig,
  UserTokenBalance,
}
export {
  INTENT_STATUS_PENDING,
  INTENT_STATUS_EXPIRED,
  INTENT_STATUS_PARTIALLY_COMPLETED,
  INTENT_STATUS_COMPLETED,
  INTENT_STATUS_FILLED,
  INTENT_STATUS_FAILED,
  INTENT_STATUS_PRECONFIRMED,
  INTENT_STATUS_UNKNOWN,
  RHINESTONE_SPOKE_POOL_ADDRESS,
  Orchestrator,
  AuthenticationRequiredError,
  InsufficientBalanceError,
  InvalidApiKeyError,
  InvalidIntentSignatureError,
  NoPathFoundError,
  OnlyOneTargetTokenAmountCanBeUnsetError,
  OrchestratorError,
  IntentNotFoundError,
  TokenNotSupportedError,
  UnsupportedChainError,
  UnsupportedChainIdError,
  UnsupportedTokenError,
  getOrchestrator,
  toSignatureHash,
  getWethAddress,
  getTokenBalanceSlot,
  getTokenRootBalanceSlot,
  getTokenSymbol,
  getHookAddress,
  getSameChainModuleAddress,
  getTargetModuleAddress,
  getRhinestoneSpokePoolAddress,
  getTokenAddress,
  getSupportedTokens,
  isOrchestratorError,
  isTokenAddressSupported,
}
